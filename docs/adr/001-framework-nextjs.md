# ADR-001: フレームワーク: Next.js

## ステータス

Accepted

## コンテキスト

Anycast Frontend の開発にあたり、React ベースのフレームワークを選定する必要がある。
モダンな Web アプリケーションに求められる SSR/SSG、ルーティング、最適化などの機能を備えたフレームワークが望ましい。

## 決定

Next.js (App Router + Turbopack) を採用する。

## 選択肢

### 選択肢 1: Next.js

- メリット
  - React エコシステムで最も広く使われているフレームワーク
  - App Router による直感的なファイルベースルーティング
  - Server Components / Server Actions のサポート
  - Turbopack による高速な開発体験
  - Vercel との親和性が高くデプロイが容易
  - 豊富なドキュメントとコミュニティ
- デメリット
  - Vercel に最適化されており、他のプラットフォームでは一部機能が制限される場合がある
  - App Router は比較的新しく、学習コストがある

### 選択肢 2: Remix

- メリット
  - Web 標準に準拠した設計
  - ネストされたルーティングとデータローディング
  - プログレッシブエンハンスメントのサポート
- デメリット
  - Next.js と比較してエコシステムが小さい
  - ドキュメントやサンプルが少ない

### 選択肢 3: Vite + React Router

- メリット
  - 軽量で高速なビルド
  - 柔軟な構成が可能
- デメリット
  - SSR/SSG を自前で構築する必要がある
  - フレームワークとしての統一感がない

## 理由

Next.js は React エコシステムにおいて最も成熟したフレームワークであり、以下の点で優れている：

1. **開発体験**: Turbopack による高速な HMR で快適な開発が可能
2. **機能の充実**: SSR、SSG、ISR、Server Components など多様なレンダリング戦略をサポート
3. **デプロイの容易さ**: Vercel へのデプロイが非常に簡単
4. **エコシステム**: 豊富なライブラリとの互換性、充実したドキュメント

## 結果

- App Router を使用したファイルベースのルーティング構造を採用
- Server Components をデフォルトとし、必要に応じて Client Components を使用
- Turbopack を開発時に使用し、高速な開発体験を実現
